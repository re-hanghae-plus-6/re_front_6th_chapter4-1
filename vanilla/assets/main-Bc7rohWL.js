import{b as e,c as t,d as n,e as r,f as i,g as a,h as o,i as s,j as c,k as l,l as u,m as d,n as f,o as p,p as m,q as h,r as g,s as _,t as v,u as y,v as b,w as x,x as S,y as C,z as w}from"./pages-VIKw3zks.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();const T={},E=e=>{let t=T[e.type];if(t)for(let[n,r]of Object.entries(t)){let t=e.target.closest(n);if(t)try{r(e)}catch(e){console.error(`ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰ ì˜¤ë¥˜ (${n}):`,e)}}},D=(()=>()=>{Object.keys(T).forEach(e=>{document.body.addEventListener(e,E)})})(),O=(e,t,n)=>{T[e]||(T[e]={}),T[e][t]=n},k=(e=200)=>{let t=window.pageYOffset||document.documentElement.scrollTop,n=window.innerHeight,r=document.documentElement.scrollHeight;return t+n>=r-e},A=e=>{let t=!1;return(...n)=>{t||(t=!0,queueMicrotask(()=>{t=!1,e(...n)}))}};v.addRoute(`/`,n),v.addRoute(`/product/:id/`,t),v.addRoute(`.*`,e);const j=A(()=>{let e=document.getElementById(`root`);if(!e)return;let t=v.target;e.innerHTML=t()});function M(){S.subscribe(j),x.subscribe(j),b.subscribe(j),v.subscribe(j)}function N(){O(`keydown`,`#search-input`,async e=>{if(e.key===`Enter`){let t=e.target.value.trim();try{await m(t)}catch(e){console.error(`ê²€ìƒ‰ ì‹¤íŒ¨:`,e)}}}),O(`change`,`#limit-select`,async e=>{let t=parseInt(e.target.value);try{await g(t)}catch(e){console.error(`ìƒí’ˆ ìˆ˜ ë³€ê²½ ì‹¤íŒ¨:`,e)}}),O(`change`,`#sort-select`,async e=>{let t=e.target.value;try{await _(t)}catch(e){console.error(`ì •ë ¬ ë³€ê²½ ì‹¤íŒ¨:`,e)}}),O(`click`,`#clear-search`,async()=>{let e=document.getElementById(`search-input`);e&&(e.value=``);try{await m(``)}catch(e){console.error(`ê²€ìƒ‰ ì´ˆê¸°í™” ì‹¤íŒ¨:`,e)}}),O(`click`,`[data-breadcrumb]`,async e=>{let t=e.target.getAttribute(`data-breadcrumb`);try{if(t===`reset`)await h({category1:``,category2:``});else if(t===`category1`){let t=e.target.getAttribute(`data-category1`);await h({category1:t,category2:``})}}catch(e){console.error(`ë¸Œë ˆë“œí¬ëŸ¼ ë„¤ë¹„ê²Œì´ì…˜ ì‹¤íŒ¨:`,e)}}),O(`click`,`.category1-filter-btn`,async e=>{let t=e.target.getAttribute(`data-category1`);if(t)try{await h({category1:t,category2:``})}catch(e){console.error(`1depth ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹¤íŒ¨:`,e)}}),O(`click`,`.category2-filter-btn`,async e=>{let t=e.target.getAttribute(`data-category1`),n=e.target.getAttribute(`data-category2`);if(!(!t||!n))try{await h({category1:t,category2:n})}catch(e){console.error(`2depth ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹¤íŒ¨:`,e)}}),O(`click`,`#retry-btn`,async()=>{try{await p(!0)}catch(e){console.error(`ìž¬ì‹œë„ ì‹¤íŒ¨:`,e)}})}function P(){O(`click`,`.product-image, .product-info`,async e=>{let t=e.target.closest(`.product-card`);if(!t)return;let n=t.getAttribute(`data-product-id`);n&&v.push(`/product/${n}/`)}),O(`click`,`.related-product-card`,async e=>{let t=e.target.closest(`[data-product-id]`).dataset.productId;t&&v.push(`/product/${t}/`)}),O(`click`,`.breadcrumb-link`,async e=>{e.preventDefault();try{let t={},n=[...e.target.parentNode.querySelectorAll(`.breadcrumb-link`)].slice(0,2);for(let[r,i]of Object.entries(n)){let n=`category${parseInt(r)+1}`;if(t[n]=i.dataset[n],i===e.target)break}let r=new URLSearchParams(t).toString();v.push(`/?${r}`)}catch(e){console.error(`ë¸Œë ˆë“œí¬ëŸ¼ ì¹´í…Œê³ ë¦¬ í•„í„° ì‹¤íŒ¨:`,e)}}),O(`click`,`.go-to-product-list`,async()=>{let e=S.getState().currentProduct,t={category1:e?.category1,category2:e?.category2,currentPage:1},n=new URLSearchParams(t).toString();v.push(`/?${n}`)}),O(`click`,`#quantity-increase`,()=>{let e=document.getElementById(`quantity-input`);if(e){let t=parseInt(e.getAttribute(`max`))||100;e.value=Math.min(t,parseInt(e.value)+1)}}),O(`click`,`#quantity-decrease`,()=>{let e=document.getElementById(`quantity-input`);e&&(e.value=Math.max(1,parseInt(e.value)-1))}),O(`click`,`#add-to-cart-btn`,e=>{let t=e.target.getAttribute(`data-product-id`),n=document.getElementById(`quantity-input`),i=n?parseInt(n.value):1;if(!t)return;let a=S.getState(),o=a.currentProduct;o&&r(o,i)})}function F(){O(`click`,`.add-to-cart-btn`,async e=>{let t=e.target.getAttribute(`data-product-id`);if(!t)return;let n=S.getState(),i=n.products.find(e=>e.productId===t);i&&r(i,1)}),O(`click`,`.quantity-increase-btn`,e=>{let t=e.target.closest(`[data-product-id]`),n=t.getAttribute(`data-product-id`),r=t.previousElementSibling;if(n&&r){let e=parseInt(r.value)+1;r.value=e,d(n,e)}}),O(`click`,`.quantity-decrease-btn`,e=>{let t=e.target.closest(`[data-product-id]`),n=t.getAttribute(`data-product-id`),r=t.nextElementSibling;if(n&&r){let e=Math.max(1,parseInt(r.value)-1);r.value=e,d(n,e)}}),O(`change`,`.quantity-input`,e=>{let t=e.target.closest(`[data-product-id]`),n=Math.max(1,parseInt(e.target.value)||1);t&&d(t,n)}),O(`change`,`.cart-item-checkbox`,e=>{let t=e.target.getAttribute(`data-product-id`);t&&u(t)}),O(`change`,`#select-all-checkbox`,e=>{e.target.checked?l():a()}),O(`click`,`.cart-item-remove-btn`,e=>{let t=e.target.getAttribute(`data-product-id`);t&&s(t)}),O(`click`,`#remove-selected-btn`,c),O(`click`,`#clear-cart-btn`,i)}function I(){O(`click`,`#cart-icon-btn`,()=>{b.dispatch({type:w.OPEN_CART_MODAL})}),O(`click`,`#cart-modal-close-btn, .cart-modal-overlay`,()=>{b.dispatch({type:w.CLOSE_CART_MODAL})}),document.addEventListener(`keydown`,e=>{if(e.key===`Escape`){let e=b.getState().cartModal;e.isOpen&&b.dispatch({type:w.CLOSE_CART_MODAL})}}),O(`change`,`#cart-modal-select-all-checkbox`,e=>{e.target.checked?l():a()}),O(`click`,`#cart-modal-remove-selected-btn`,()=>{c()}),O(`click`,`#cart-modal-clear-cart-btn`,i),O(`click`,`#cart-modal-checkout-btn`,()=>{b.dispatch({type:w.SHOW_TOAST,payload:{message:`êµ¬ë§¤ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ìž…ë‹ˆë‹¤.`,type:`info`}})})}function L(){window.addEventListener(`scroll`,async()=>{if(v.route.path===`/`&&k(200)){let e=S.getState(),t=e.products.length<e.totalCount;if(e.loading||!t)return;try{await f()}catch(e){console.error(`ë¬´í•œ ìŠ¤í¬ë¡¤ ë¡œë“œ ì‹¤íŒ¨:`,e)}}})}function R(){O(`click`,`#toast-close-btn`,()=>{b.dispatch({type:w.HIDE_TOAST})})}function z(){O(`click`,`[data-link]`,e=>{e.preventDefault();let t=e.target.getAttribute(`href`);t&&v.push(t)})}function B(){N(),P(),F(),I(),L(),R(),z()}const V=function(e){return`/front_6th_chapter4-1/vanilla/`+e},H={},U=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=V(t,n),t in H)return;H[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``,o=!!n;if(o)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let s=document.createElement(`link`);if(s.rel=r?`stylesheet`:`modulepreload`,r||(s.as=`script`),s.crossOrigin=``,s.href=t,a&&s.setAttribute(`nonce`,a),document.head.appendChild(s),r)return new Promise((e,n)=>{s.addEventListener(`load`,e),s.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[]){if(e.status!==`rejected`)continue;i(e.reason)}return e().catch(i)})},W=()=>U(async()=>{let{worker:e}=await import(`./browser-B73V5b_N.js`);return{worker:e}},[]).then(({worker:e})=>e.start({serviceWorker:{url:`${y}mockServiceWorker.js`},onUnhandledRequest:`bypass`}));function G(){if(typeof window<`u`&&window.__INITIAL_DATA__){let e=window.__INITIAL_DATA__;console.log(`ðŸ”„ í•˜ì´ë“œë ˆì´ì…˜ ì‹œìž‘:`,e),e.products&&e.categories?(console.log(`ðŸ  í™ˆíŽ˜ì´ì§€ ë°ì´í„° í•˜ì´ë“œë ˆì´ì…˜:`,e.products.length,`ê°œ ìƒí’ˆ`),S.dispatch({type:C.SETUP,payload:{products:e.products,categories:e.categories,totalCount:e.totalCount,loading:!1,status:`done`,error:null}})):e.currentProduct&&(console.log(`ðŸ“¦ ìƒí’ˆ ìƒì„¸ ë°ì´í„° í•˜ì´ë“œë ˆì´ì…˜:`,e.currentProduct.title),S.dispatch({type:C.SET_CURRENT_PRODUCT,payload:e.currentProduct}),e.relatedProducts&&S.dispatch({type:C.SET_RELATED_PRODUCTS,payload:e.relatedProducts})),delete window.__INITIAL_DATA__}else console.log(`âŒ ì„œë²„ ë°ì´í„° ì—†ìŒ`)}function K(){B(),D(),o(),G(),M(),v.start()}W().then(K);